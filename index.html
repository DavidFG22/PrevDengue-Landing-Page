<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PrevDengue - Tu alerta salva vidas</title>

    <link rel="stylesheet" href="styles.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito+Sans:opsz,wght@6..12,300;400;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
  </head>
  <body>
    <header>
      <div class="header-content">
        <div class="logo-container">
          <img
            src="Imagenes/logo sin fondo.png"
            alt="Logo PrevDengue"
            class="logo-img"
          />
        </div>

        <button class="hamburger" id="hamburger-btn" aria-label="Abrir menú">
          <i class="fa-solid fa-bars"></i>
        </button>

        <div class="nav-container" id="nav-menu">
          <nav>
            <ul>
              <li><a href="index.html">Inicio</a></li>
              <li><a href="ver-reportes.html">Ver reportes</a></li>
              <li><a href="consultar-focos.html">Consultar Focos</a></li>
              <li><a href="comunidad.html">Comunidad</a></li>
            </ul>
          </nav>

          <div class="auth-buttons">
            <button
              class="btn-login"
              onclick="window.location.href='login.html'"
            >
              Iniciar Sesión
            </button>
            <button
              class="btn-register"
              onclick="window.location.href='register.html'"
            >
              Registrar
            </button>
          </div>
        </div>
      </div>
    </header>

    <section class="hero">
      <div class="hero-content">
        <div class="hero-text">
          <h1>¿Has visto algún foco de dengue en tu zona?</h1>
          <p>
            Identifica, reporta y da seguimiento a los focos de reproducción del
            mosquito en tu comunidad. Tu participación es clave para la
            prevención.
          </p>

          <div class="hero-actions">
            <button
              class="btn-primary shadow-pulse"
              onclick="window.location.href='login.html'"
            >
              REPORTAR FOCO
            </button>
            <span class="social-proof">
              <i class="fa-solid fa-circle-check" style="color: #22c55e"></i>
              Más de 100 reportes atendidos esta semana.
            </span>
          </div>
        </div>

        <div class="hero-map">
          <div class="map-card">
            <div id="main-map"></div>
          </div>
        </div>
      </div>
    </section>

    <section class="quick-tools">
      <div class="section-header">
        <h2>Servicios Ciudadanos</h2>
        <p>Herramientas esenciales para tu seguridad y salud.</p>
      </div>

      <div class="tools-grid">
        <div class="tool-card">
          <div class="tool-icon-wrapper icon-security">
            <i class="fa-solid fa-user-shield"></i>
          </div>
          <div class="tool-content">
            <h3>Verificar Brigadista</h3>
            <p>Ingresa el DNI para confirmar si es personal autorizado.</p>
            <div class="input-group">
              <input
                type="text"
                placeholder="DNI del personal"
                class="verify-input"
              />
              <button class="btn-icon">
                <i class="fa-solid fa-search"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="tool-card border-health">
          <div class="tool-icon-wrapper icon-health">
            <i class="fa-solid fa-notes-medical"></i>
          </div>
          <div class="tool-content">
            <h3>¿Tienes síntomas?</h3>
            <p>Realiza un triaje rápido o ubica tu posta médica más cercana.</p>
            <button
              class="btn-outline-health"
              onclick="window.location.href='Inicio-Evaluacion.html'"
            >
              Evaluación Express
            </button>
          </div>
        </div>

        <div class="tool-card">
          <div class="tool-icon-wrapper icon-calendar">
            <i class="fa-solid fa-calendar-days"></i>
          </div>
          <div class="tool-content">
            <h3>Cronograma</h3>
            <p>Revisa cuándo pasará la brigada de fumigación por tu barrio.</p>
            <button
              class="btn-outline"
              onclick="window.location.href='calendario.html'"
            >
              Ver Calendario
            </button>
          </div>
        </div>

        <div class="tool-card">
          <div class="tool-icon-wrapper icon-alert">
            <i class="fa-solid fa-bell"></i>
          </div>
          <div class="tool-content">
            <h3>Alertas Activas</h3>
            <p>
              <strong>2 zonas</strong> en tu distrito reportan riesgo alto hoy.
            </p>
            <button
              class="btn-outline"
              onclick="window.location.href='consultar-focos.html'"
            >
              Ver Mapa de Riesgo
            </button>
          </div>
        </div>
      </div>
    </section>

    <section class="features">
      <h2>¿Cómo funciona PrevDengue?</h2>
      <div class="features-grid">
        <div class="feature-item">
          <div class="feature-icon">
            <i class="fa-solid fa-location-crosshairs"></i>
          </div>
          <h3>1. Ubica</h3>
          <p>
            Encuentra focos de dengue potenciales en tu barrio mediante el mapa.
          </p>
        </div>

        <div class="feature-item">
          <div class="feature-icon">
            <i class="fa-solid fa-camera"></i>
          </div>
          <h3>2. Reporta</h3>
          <p>
            Toma una foto, añade la ubicación y envía una alerta a las
            autoridades.
          </p>
        </div>

        <div class="feature-item">
          <div class="feature-icon">
            <i class="fa-solid fa-mobile-screen"></i>
          </div>
          <h3>3. Consulta</h3>
          <p>
            Sigue el estado de tu reporte y verifica las acciones de control.
          </p>
        </div>

        <div class="feature-item">
          <div class="feature-icon">
            <i class="fa-solid fa-graduation-cap"></i>
          </div>
          <h3>4. Aprende</h3>
          <p>Recibe consejos educativos para mantener tu hogar seguro.</p>
        </div>
      </div>
    </section>

    <section class="app-promo">
      <div class="promo-container">
        <div class="phone-mockup">
          <div class="phone-notch"></div>
          <div class="phone-screen">
            <div class="screen-header">
              <span>9:41</span>
              <i class="fa-solid fa-signal"></i>
            </div>
            <div class="screen-map">
              <i class="fa-solid fa-location-dot screen-pin"></i>
              <div class="screen-card">
                <h4>Reportar Foco</h4>
                <button class="screen-btn">Enviar</button>
              </div>
            </div>
          </div>
        </div>

        <div class="promo-text">
          <div class="testimonial">
            <div class="user-avatar">
              <i class="fa-solid fa-user"></i>
            </div>
            <div class="testimonial-content">
              <div class="stars">
                <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i
                ><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i
                ><i class="fa-solid fa-star"></i>
              </div>
              <p>
                "Gracias a PrevDengue mi distrito se mantiene libre del dengue.
                La respuesta fue rápida."
              </p>
              <small>- María G., Comas</small>
            </div>
          </div>

          <div class="downloads">
            <h3>Descarga la app gratis</h3>
            <div class="store-buttons">
              <button class="store-btn">
                <i class="fa-brands fa-apple"></i> App Store
              </button>
              <button class="store-btn">
                <i class="fa-brands fa-google-play"></i> Google Play
              </button>
            </div>
            <p class="legal-text">Disponible para Android y iOS.</p>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="footer-container">
        <div class="footer-col">
          <h3>PrevDengue</h3>
          <p>© 2025 PrevDengue.<br />Todos los derechos reservados.</p>
          <p class="version-text">Versión 1.0.0</p>
        </div>

        <div class="footer-col">
          <h4>Protección de Datos</h4>
          <ul class="footer-links">
            <li><a href="Documentos/Ley29733.pdf">Ley N° 29733</a></li>
            <li><a href="#">Políticas de Privacidad</a></li>
            <li><a href="#">Normas de Uso</a></li>
            <li><a href="#">Reglamento de la App</a></li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>Síguenos</h4>
          <div class="social-icons">
            <a href="#" class="social-link facebook" aria-label="Facebook">
              <img
                src="Imagenes/facebook.png"
                alt="Facebook"
                class="social-img"
              />
            </a>
            <a href="#" class="social-link instagram" aria-label="Instagram">
              <img
                src="Imagenes/Instagraml.png"
                alt="Instagram"
                class="social-img"
              />
            </a>
            <a href="#" class="social-link telegram" aria-label="Telegram">
              <img
                src="Imagenes/telegrama.png"
                alt="Telegram"
                class="social-img"
              />
            </a>
            <a href="#" class="social-link x-twitter" aria-label="X Twitter">
              <img src="Imagenes/X.png" alt="X" class="social-img" />
            </a>
          </div>
        </div>
      </div>
    </footer>
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>

    <script>
      // === 1. CONFIGURACIÓN DEL MAPA ===

      // Inicializar el mapa centrado en Lima
      var map = L.map("main-map").setView([-11.95, -77.07], 13);

      // Capa base (OpenStreetMap)
      var osmLayer = L.tileLayer(
        "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
        {
          maxZoom: 19,
          attribution: "© OpenStreetMap",
        }
      ).addTo(map);

      // -- Iconos Personalizados --
      // Rojo para Focos/Riesgo (HU02/HU27)
      var riesgoIcon = L.icon({
        iconUrl:
          "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",
        shadowUrl:
          "https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41],
      });

      // Azul para Centros de Salud (HU37)
      var saludIcon = L.icon({
        iconUrl:
          "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",
        shadowUrl:
          "https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41],
      });

      // -- Grupos de Marcadores (Capas) --

      // Grupo 1: Focos de Dengue
      var foco1 = L.marker([-11.955, -77.075], { icon: riesgoIcon }).bindPopup(
        "<b>Riesgo Alto</b><br>Agua estancada en parque."
      );
      var foco2 = L.marker([-11.948, -77.062], { icon: riesgoIcon }).bindPopup(
        "<b>Posible Criadero</b><br>Llantas abandonadas."
      );

      var focosLayer = L.layerGroup([foco1, foco2]);

      // Grupo 2: Centros de Salud
      var hospital1 = L.marker([-11.96, -77.08], { icon: saludIcon }).bindPopup(
        "<b>Centro de Salud Comas</b><br>Atención 24h."
      );
      var hospital2 = L.marker([-11.94, -77.07], { icon: saludIcon }).bindPopup(
        "<b>Posta Médica Santa Luzmila</b><br>Lunes a Sábado 8am-6pm."
      );

      var saludLayer = L.layerGroup([hospital1, hospital2]);

      // Añadir ambas capas por defecto
      focosLayer.addTo(map);
      saludLayer.addTo(map);

      // -- Control de Capas (Filtros) --
      var overlayMaps = {
        "<span style='color: #EF4444; font-weight: bold;'>Focos de Riesgo</span>":
          focosLayer,
        "<span style='color: #2563EB; font-weight: bold;'>Centros de Salud</span>":
          saludLayer,
      };

      // Agregar control al mapa (arriba a la derecha)
      L.control.layers(null, overlayMaps, { collapsed: false }).addTo(map);

      // === 2. SCRIPT MENÚ HAMBURGUESA ===
      const hamburger = document.getElementById("hamburger-btn");
      const navMenu = document.getElementById("nav-menu");

      hamburger.addEventListener("click", () => {
        navMenu.classList.toggle("active");
        const icon = hamburger.querySelector("i");
        if (navMenu.classList.contains("active")) {
          icon.classList.remove("fa-bars");
          icon.classList.add("fa-xmark");
        } else {
          icon.classList.remove("fa-xmark");
          icon.classList.add("fa-bars");
        }
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const verifyInput = document.querySelector(".verify-input");
        const verifyBtn = document.querySelector(".btn-icon");

        // Crear elemento para mostrar el resultado (Feedback)
        const feedbackMsg = document.createElement("div");
        feedbackMsg.style.fontSize = "0.85rem";
        feedbackMsg.style.marginTop = "8px";
        feedbackMsg.style.fontWeight = "600";

        // Insertar el mensaje después del grupo de input
        verifyInput.closest(".input-group").after(feedbackMsg);

        verifyBtn.addEventListener("click", () => {
          const dni = verifyInput.value.trim();

          // Limpiar estilos previos
          feedbackMsg.className = "";
          feedbackMsg.innerHTML = "";
          verifyInput.style.borderColor = "#E2E8F0";

          // 1. Validación: Debe ser numérico y tener 8 dígitos
          if (!/^\d{8}$/.test(dni)) {
            feedbackMsg.innerHTML =
              '<i class="fa-solid fa-circle-xmark"></i> El DNI debe tener 8 dígitos numéricos.';
            feedbackMsg.style.color = "#EF4444"; // Rojo
            verifyInput.style.borderColor = "#EF4444";
            return;
          }

          // 2. Simulación de Verificación (Backend Mock)
          // Aquí podrías conectar con una API real en el futuro
          // Simulamos que los DNI que terminan en '0', '2', '4', '6', '8' son válidos
          const esValido = parseInt(dni.slice(-1)) % 2 === 0;

          if (esValido) {
            // CASO: Brigadista Autorizado
            feedbackMsg.innerHTML =
              '<i class="fa-solid fa-circle-check"></i> Brigadista Autorizado';
            feedbackMsg.style.color = "#16A34A"; // Verde
            verifyInput.style.borderColor = "#16A34A";
          } else {
            // CASO: No encontrado / No autorizado
            feedbackMsg.innerHTML =
              '<i class="fa-solid fa-triangle-exclamation"></i> Personal NO registrado';
            feedbackMsg.style.color = "#D97706"; // Naranja
            verifyInput.style.borderColor = "#D97706";
          }
        });
      });
    </script>
  </body>
</html>
